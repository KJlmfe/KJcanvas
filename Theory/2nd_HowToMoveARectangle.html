<html>
	<head>
		<title>How To Draw A Rectangle</title>
		<a http-equiv="Content-Type" content="text/html; charset=utf-8">
		<script src="../ThirdLibrary/jquery-1.7.2.min.js"></script>	
	</head>

	<body>
		<h3>How To Move A Rectangle</h3>
		<canvas width = "600px" height = "500px" style="float:left; border:2px solid #0AF"></canvas>
		<pre style="float:left;font-size:18px;" >
	1.设置起始、终点位置以及移动速度

	2.计算出两点之间的路线方程
	
	3.每24ms刷新一次画板(用setInterval)
		
		(1).清空画板
		(2).计算图形位置
		(3).绘制图形
		(4).判断是否到达终点
		</pre>
		<script type="text/javascript">
 		 	var canvas = document.getElementsByTagName("canvas")[0];
			var ctx = canvas.getContext('2d'); 
			
			var start_x = 50;
			var start_y = 50;
			var end_x = 500;
			var end_y = 400;
			var moveSpeed = 2;

			//默认沿着两点间的直线路径移动
			if(start_x != end_x)   //求出直线方程的k与b
			{
				k = (start_y - end_y) / (start_x - end_x);  
				b = start_y - k * start_x;
			}
			else
			{
				k = 0;
				b = 0;
			}
	
			var moveTimer = setInterval(function()
			{
				//擦干净画布
				ctx.clearRect(0,0,600,500);
				//计算图形位置
				if(end_x > start_x)
				{
					start_x += moveSpeed;
					start_y = k*start_x + b;
					if(end_x <= start_x)
					{
						start_x = end_x;
						start_y = end_y;
					}
				}
				else if(end_x < start_x)
				{
					start_x -= moveSpeed;
					start_y = k*start_x + b;
					if(end_x >= start_x)
					{
						start_x = end_x;
						start_y = end_y;
					}
				}
				else if(end_y < start_y)
				{
					start_y -= moveSpeed;
					if(end_y >= start_y)
					{
						start_y = end_y;
					}
				}
				else if(end_y > start_y)
				{
					start_y += moveSpeed;
					if(end_y <= start_y)
					{
						start_y = end_y;
					}
				}
				//绘制图形
				ctx.fillStyle = "0F0";
				ctx.fillRect(start_x,start_y,60,60);  //画一个实体矩形
				ctx.strokeStyle = "F00";
				ctx.strokeRect(start_x,start_y,60,60); //勾画出矩形边框
			
				//判断是否到达目标位置
				if(start_x == end_x && start_y == end_y)
				{
					clearInterval(moveTimer);
				}
			},24);  //每24毫秒刷新一下画面
		</script>
	</body>
</html>
